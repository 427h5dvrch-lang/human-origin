<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>HumanOrigin</title>
    <style>
      /* --- STYLE "PAPIER / CLEAN" --- */
      body { 
        background-color: #f3f4f6; 
        color: #111; 
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; 
        margin: 0; 
        padding: 40px; 
        display: flex; 
        justify-content: center; 
      }
      .app-container { 
        width: 100%; 
        max-width: 850px; 
      }

      /* CARTES */
      .card { 
        background: white; 
        border-radius: 12px; 
        box-shadow: 0 10px 25px rgba(0,0,0,0.05); 
        padding: 40px; 
        margin-bottom: 20px; 
        border: 1px solid #e5e7eb;
      }

      /* TYPO */
      h1 { font-size: 14px; text-transform: uppercase; letter-spacing: 1px; color: #9ca3af; margin: 0 0 5px 0; }
      h2 { font-size: 24px; font-weight: 800; margin: 0 0 20px 0; letter-spacing: -0.5px; }
      h3 { font-size: 16px; font-weight: 600; margin: 0 0 15px 0; }

      /* BOUTONS & INPUTS */
      input, select { 
        padding: 12px 16px; 
        border: 1px solid #e5e7eb; 
        border-radius: 8px; 
        font-size: 14px; 
        background: #f9fafb; 
        width: 100%; 
        box-sizing: border-box; 
        margin-bottom: 10px;
      }
      input:focus, select:focus { outline: 2px solid #000; border-color: transparent; }
      
      button { 
        background: #000; 
        color: white; 
        border: none; 
        padding: 12px 20px; 
        border-radius: 8px; 
        font-weight: 600; 
        cursor: pointer; 
        font-size: 14px; 
        transition: transform 0.1s; 
      }
      button:hover { transform: translateY(-1px); box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
      button:active { transform: translateY(0); }
      button:disabled { background: #e5e7eb; color: #9ca3af; cursor: not-allowed; transform: none; box-shadow: none; }
      
      button.secondary { background: white; border: 1px solid #e5e7eb; color: #374151; }
      button.secondary:hover { background: #f9fafb; }

      /* LAYOUT UTILS */
      .row { display: flex; gap: 10px; align-items: center; }
      .between { justify-content: space-between; }
      .mt-4 { margin-top: 20px; }
      .mb-4 { margin-bottom: 20px; }
      .text-center { text-align: center; }
      .hidden { display: none; }
      .muted { color: #6b7280; font-size: 13px; }

      /* STATUS BADGES */
      .status-bar { display: flex; gap: 8px; margin-bottom: 20px; justify-content: flex-end; }
      .badge { 
        font-size: 11px; font-weight: 700; padding: 4px 8px; border-radius: 4px; 
        text-transform: uppercase; letter-spacing: 0.5px;
      }
      .badge.ok { background: #d1fae5; color: #065f46; } /* Vert pastel */
      .badge.warn { background: #fef3c7; color: #92400e; } /* Orange pastel */

      /* DASHBOARD */
      .stats-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin: 30px 0; }
      .stat-box { text-align: center; padding: 20px; background: #f9fafb; border-radius: 8px; border: 1px solid #f3f4f6; }
      .stat-val { font-size: 32px; font-weight: 800; display: block; line-height: 1.2; }
      .stat-label { font-size: 11px; text-transform: uppercase; color: #6b7280; font-weight: 600; }

      /* TABLES */
      table { width: 100%; border-collapse: collapse; font-size: 13px; margin-top: 10px; }
      th { text-align: left; color: #9ca3af; font-weight: 600; border-bottom: 1px solid #e5e7eb; padding-bottom: 10px; font-size: 11px; text-transform: uppercase; }
      td { padding: 12px 0; border-bottom: 1px solid #f3f4f6; color: #374151; }
      .mono { font-family: ui-monospace, SFMono-Regular, monospace; color: #6b7280; font-size: 11px; }

      /* TOAST */
      #toast { 
        position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); 
        background: #000; color: white; padding: 10px 20px; border-radius: 30px; 
        font-size: 13px; font-weight: 500; display: none; box-shadow: 0 5px 15px rgba(0,0,0,0.2); 
      }
    </style>
  </head>
  <body>

    <div class="app-container">
      
      <div class="row between mb-4">
        <div>
          <h1>HumanOrigin // Core</h1>
          <div style="font-weight: 600; font-size: 14px;">
            Projet: <span id="current-project-title" style="color:#000;">—</span>
          </div>
        </div>
        <div class="status-bar">
          <span id="cloud-badge" class="badge ok">Cloud Connected</span>
          <span class="badge warn" style="display:none;" id="queue-badge">Queue: <span id="queue-count">0</span></span>
          <button id="sync-btn" class="secondary" style="padding:4px 8px; font-size:11px;">Sync</button>
          <button id="logout-btn" class="secondary" style="padding:4px 8px; font-size:11px;">Logout</button>
        </div>
      </div>

      <div id="login-screen" class="card text-center" style="padding: 60px 40px;">
        <h2 style="margin-bottom: 10px;">Identification</h2>
        <p class="muted mb-4">Connectez-vous pour sécuriser et signer vos sessions.</p>
        
        <div style="max-width: 320px; margin: 0 auto;">
          <input id="email" type="email" placeholder="votre@email.com" />
          <button id="login-btn" style="width:100%;">Recevoir mon lien de connexion</button>
        </div>
      </div>

      <div id="app-screen" class="hidden">
        
        <div id="project-section" class="card">
          <h2>Sélection du Projet</h2>
          <div class="row">
            <div style="flex: 2;">
              <select id="project-selector">
                <option value="" disabled selected>— Charger un projet existant —</option>
              </select>
            </div>
            <div style="flex: 0 0 auto; color:#9ca3af; font-size:12px;">OU</div>
            <div style="flex: 2; display:flex; gap:10px;">
              <input id="project-name" placeholder="Nom du nouveau projet..." style="margin:0;" />
              <button id="init-btn">Créer</button>
            </div>
          </div>
        </div>

        <div id="controls-section" class="card hidden">
          <div class="row between">
            <h2>Session Active</h2>
            <div class="row">
              <button id="start-btn">Démarrer une session</button>
              <button id="stop-btn" class="hidden" style="background:#ef4444;">Arrêter & Signer</button>
              <button id="finalize-btn" class="secondary" disabled>Générer Certificat</button>
            </div>
          </div>

          <div id="live-dashboard" class="hidden">
            <div class="stats-grid">
              <div class="stat-box">
                <span id="timer" class="stat-val">00:00</span>
                <span class="stat-label">Durée</span>
              </div>
              <div class="stat-box">
                <span id="keystrokes-display" class="stat-val">0</span>
                <span class="stat-label">Frappes</span>
              </div>
              <div class="stat-box">
                <span id="clicks-display" class="stat-val">0</span>
                <span class="stat-label">Clics</span>
              </div>
            </div>
          </div>

          <div class="row mt-4" style="background: #f9fafb; padding: 10px 15px; border-radius: 8px;">
            <span class="muted" style="margin-right:15px;">Dernière analyse :</span>
            <span class="badge" style="background:#e5e7eb; color:#374151;">SCP: <span id="last-scp">—</span></span>
            <span class="badge" style="background:#e5e7eb; color:#374151;">Preuve: <span id="last-evidence">—</span></span>
          </div>
        </div>

        <div class="card">
          <h3>Historique Sécurisé</h3>
          <div style="display:grid; grid-template-columns: 1fr 1fr; gap:40px;">
            
            <div>
              <h4 style="font-size:11px; text-transform:uppercase; color:#9ca3af; border-bottom:2px solid #000; display:inline-block; padding-bottom:5px;">Sessions</h4>
              <table>
                <thead>
                  <tr>
                    <th>Date</th>
                    <th>Durée</th>
                    <th style="text-align:right;">Events</th>
                  </tr>
                </thead>
                <tbody id="sessions-tbody">
                  </tbody>
              </table>
            </div>

            <div>
              <h4 style="font-size:11px; text-transform:uppercase; color:#9ca3af; border-bottom:2px solid #000; display:inline-block; padding-bottom:5px;">Certificats Émis</h4>
              <table>
                <thead>
                  <tr>
                    <th>Date</th>
                    <th>Hash (SHA256)</th>
                    <th>Sig</th>
                  </tr>
                </thead>
                <tbody id="certs-tbody">
                  </tbody>
              </table>
            </div>

          </div>
        </div>

      </div>

    </div>

    <div id="toast">Notification</div>

    <script type="module" src="/src/main.js"></script>
  </body>
</html>